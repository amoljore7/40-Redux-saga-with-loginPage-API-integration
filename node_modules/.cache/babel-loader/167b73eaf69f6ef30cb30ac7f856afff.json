{"ast":null,"code":"import { put, takeLatest } from \"redux-saga/effects\";\nimport { SET_LOADING } from \"../actions/employee/employeeTypes\";\nimport { LOGIN, LOGOUT, LOGIN_SUCCESS, LOGOUT_SUCCESS, CURRENT_USER, SUCCESS_MESSAGE, ERROR_MESSAGE } from \"../actions/auth/authTypes\";\nimport Axios from \"axios\";\nexport function* userLogin({\n  payload\n}) {\n  yield put({\n    type: SET_LOADING\n  });\n\n  try {\n    // const user = yield Axios.post(\"/api/token/\", payload).then(\n    //   (res) => res.data\n    // );\n    const userData = {\n      user: payload.username\n    };\n    yield put({\n      type: LOGIN_SUCCESS,\n      payload: userData\n    });\n    localStorage.setItem(\"user\", JSON.stringify(userData));\n    let msg = {\n      id: 1,\n      text: \"Login successful\"\n    };\n    yield put({\n      type: SUCCESS_MESSAGE,\n      payload: msg\n    });\n  } catch (e) {\n    let msg = {\n      id: 1,\n      text: \"No active account found with the given credentials\"\n    };\n    yield put({\n      type: ERROR_MESSAGE,\n      payload: msg\n    });\n  }\n\n  yield put({\n    type: SET_LOADING\n  });\n}\nexport function* userLogout() {\n  const successMsg = {\n    id: 1,\n    text: \"Logout successful\"\n  };\n  localStorage.removeItem(\"user\");\n  localStorage.removeItem(\"accessToken\");\n  localStorage.removeItem(\"refreshToken\");\n  yield put({\n    type: LOGOUT_SUCCESS\n  });\n  yield put({\n    type: SUCCESS_MESSAGE,\n    payload: successMsg\n  });\n}\nexport function* currentUser({\n  payload\n}) {\n  yield put({\n    type: LOGIN_SUCCESS,\n    payload: payload\n  });\n}\nexport function* authActionWatcher() {\n  yield takeLatest(LOGIN, userLogin);\n  yield takeLatest(LOGOUT, userLogout);\n  yield takeLatest(CURRENT_USER, currentUser);\n}","map":{"version":3,"sources":["/home/amol/Desktop/MACE/src/sagas/auth.sagas.js"],"names":["put","takeLatest","SET_LOADING","LOGIN","LOGOUT","LOGIN_SUCCESS","LOGOUT_SUCCESS","CURRENT_USER","SUCCESS_MESSAGE","ERROR_MESSAGE","Axios","userLogin","payload","type","userData","user","username","localStorage","setItem","JSON","stringify","msg","id","text","e","userLogout","successMsg","removeItem","currentUser","authActionWatcher"],"mappings":"AAAA,SAASA,GAAT,EAAcC,UAAd,QAAgC,oBAAhC;AACA,SAASC,WAAT,QAA4B,mCAA5B;AACA,SACEC,KADF,EAEEC,MAFF,EAGEC,aAHF,EAIEC,cAJF,EAKEC,YALF,EAMEC,eANF,EAOEC,aAPF,QAQO,2BARP;AASA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,UAAUC,SAAV,CAAoB;AAAEC,EAAAA;AAAF,CAApB,EAAiC;AACtC,QAAMZ,GAAG,CAAC;AAAEa,IAAAA,IAAI,EAAEX;AAAR,GAAD,CAAT;;AACA,MAAI;AACF;AACA;AACA;AACA,UAAMY,QAAQ,GAAG;AACfC,MAAAA,IAAI,EAAEH,OAAO,CAACI;AADC,KAAjB;AAGA,UAAMhB,GAAG,CAAC;AAAEa,MAAAA,IAAI,EAAER,aAAR;AAAuBO,MAAAA,OAAO,EAAEE;AAAhC,KAAD,CAAT;AACAG,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeN,QAAf,CAA7B;AACA,QAAIO,GAAG,GAAG;AACRC,MAAAA,EAAE,EAAE,CADI;AAERC,MAAAA,IAAI,EAAE;AAFE,KAAV;AAIA,UAAMvB,GAAG,CAAC;AAAEa,MAAAA,IAAI,EAAEL,eAAR;AAAyBI,MAAAA,OAAO,EAAES;AAAlC,KAAD,CAAT;AACD,GAdD,CAcE,OAAOG,CAAP,EAAU;AACV,QAAIH,GAAG,GAAG;AACRC,MAAAA,EAAE,EAAE,CADI;AAERC,MAAAA,IAAI,EAAE;AAFE,KAAV;AAIA,UAAMvB,GAAG,CAAC;AAAEa,MAAAA,IAAI,EAAEJ,aAAR;AAAuBG,MAAAA,OAAO,EAAES;AAAhC,KAAD,CAAT;AACD;;AACD,QAAMrB,GAAG,CAAC;AAAEa,IAAAA,IAAI,EAAEX;AAAR,GAAD,CAAT;AACD;AAED,OAAO,UAAUuB,UAAV,GAAuB;AAC5B,QAAMC,UAAU,GAAG;AACjBJ,IAAAA,EAAE,EAAE,CADa;AAEjBC,IAAAA,IAAI,EAAE;AAFW,GAAnB;AAIAN,EAAAA,YAAY,CAACU,UAAb,CAAwB,MAAxB;AACAV,EAAAA,YAAY,CAACU,UAAb,CAAwB,aAAxB;AACAV,EAAAA,YAAY,CAACU,UAAb,CAAwB,cAAxB;AACA,QAAM3B,GAAG,CAAC;AAAEa,IAAAA,IAAI,EAAEP;AAAR,GAAD,CAAT;AACA,QAAMN,GAAG,CAAC;AAAEa,IAAAA,IAAI,EAAEL,eAAR;AAAyBI,IAAAA,OAAO,EAAEc;AAAlC,GAAD,CAAT;AACD;AAED,OAAO,UAAUE,WAAV,CAAsB;AAAEhB,EAAAA;AAAF,CAAtB,EAAmC;AACxC,QAAMZ,GAAG,CAAC;AAAEa,IAAAA,IAAI,EAAER,aAAR;AAAuBO,IAAAA,OAAO,EAAEA;AAAhC,GAAD,CAAT;AACD;AAED,OAAO,UAAUiB,iBAAV,GAA8B;AACnC,QAAM5B,UAAU,CAACE,KAAD,EAAQQ,SAAR,CAAhB;AACA,QAAMV,UAAU,CAACG,MAAD,EAASqB,UAAT,CAAhB;AACA,QAAMxB,UAAU,CAACM,YAAD,EAAeqB,WAAf,CAAhB;AACD","sourcesContent":["import { put, takeLatest } from \"redux-saga/effects\";\nimport { SET_LOADING } from \"../actions/employee/employeeTypes\";\nimport {\n  LOGIN,\n  LOGOUT,\n  LOGIN_SUCCESS,\n  LOGOUT_SUCCESS,\n  CURRENT_USER,\n  SUCCESS_MESSAGE,\n  ERROR_MESSAGE,\n} from \"../actions/auth/authTypes\";\nimport Axios from \"axios\";\n\nexport function* userLogin({ payload }) {\n  yield put({ type: SET_LOADING });\n  try {\n    // const user = yield Axios.post(\"/api/token/\", payload).then(\n    //   (res) => res.data\n    // );\n    const userData = {\n      user: payload.username,\n    };\n    yield put({ type: LOGIN_SUCCESS, payload: userData });\n    localStorage.setItem(\"user\", JSON.stringify(userData));\n    let msg = {\n      id: 1,\n      text: \"Login successful\",\n    };\n    yield put({ type: SUCCESS_MESSAGE, payload: msg });\n  } catch (e) {\n    let msg = {\n      id: 1,\n      text: \"No active account found with the given credentials\",\n    };\n    yield put({ type: ERROR_MESSAGE, payload: msg });\n  }\n  yield put({ type: SET_LOADING });\n}\n\nexport function* userLogout() {\n  const successMsg = {\n    id: 1,\n    text: \"Logout successful\",\n  };\n  localStorage.removeItem(\"user\");\n  localStorage.removeItem(\"accessToken\");\n  localStorage.removeItem(\"refreshToken\");\n  yield put({ type: LOGOUT_SUCCESS });\n  yield put({ type: SUCCESS_MESSAGE, payload: successMsg });\n}\n\nexport function* currentUser({ payload }) {\n  yield put({ type: LOGIN_SUCCESS, payload: payload });\n}\n\nexport function* authActionWatcher() {\n  yield takeLatest(LOGIN, userLogin);\n  yield takeLatest(LOGOUT, userLogout);\n  yield takeLatest(CURRENT_USER, currentUser);\n}\n"]},"metadata":{},"sourceType":"module"}